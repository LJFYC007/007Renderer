# Repository Guidelines

## Project Structure & Module Organization
- `src/` holds runtime modules: `Core/` wires renderer services, `RenderPasses/` implements Falcor-style passes, `ShaderPasses/` stores Slang kernels, `Scene/` manages assets, `Utils/` houses helpers, and `main.cpp` is the entry point.
- `tests/` collects GoogleTest suites and companion `.slang` files; extend them when adding passes or GPU features.
- `media/` keeps reference scenes and textures; prefer Git LFS or download links for large binaries.
- `external/` mirrors vendor dependencies (Slang, DXC, ImGui, NVRHI). Update via submodules or `setup.ps1`; never patch vendor sources directly.

## Environment Setup & Build Commands
- Run `pwsh -File setup.ps1` after cloning to install Slang and DXC toolchains expected by CMake.
- Configure an out-of-source build directory with `cmake -S . -B build -D CMAKE_BUILD_TYPE=Debug -D BUILD_TESTING=ON`.
- Build on Windows using `C:\Scoop\shims\cmake.exe --build e:/007Renderer/build/Debug --config Debug --target 007Renderer --`; binaries appear in `build/bin/<Config>/`.
- For IDE workflows, open `build/007Renderer.sln` (generated by CMake) while keeping the source tree clean.
- Launch the renderer from `build/bin/Debug/007Renderer.exe` or `build/bin/Release/007Renderer.exe`; verify Release builds before merging.

## Testing Guidelines
- Compile the suite with `cmake --build build --config Debug --target 007Tests` and execute via `ctest --test-dir build --config Debug`.
- Name test sources `*Test.cpp`, colocate prerequisite shaders, and rely on `Environment` helpers to validate DLL availability.
- Capture visual deltas through screenshots or GPU captures stored under `logs/` when rendering output changes.

## Coding Style & Naming Conventions
- Enforce `.clang-format` (Chromium style, 4-space indent, 150-column limit, left-aligned pointers) using `python tools/run-clang-format.py --color always -i <files>` or `pre-commit run --files <paths>`.
- Apply Falcor naming: member variables `mPascalCase`, pointer members `mpName`, static members `sName`, constants `kName`, pointer parameters prefixed with `p` (e.g., `pDevice`), and functions/locals in lower camelCase.
- Keep comments concise, in English, and focused on non-obvious behavior; rely on descriptive APIs instead of redundant notes.
- Mirror `.slang`/`.slangh` filenames with their owning pass and update the associated CMake targets whenever shader modules change.

## Commit & Pull Request Guidelines
- Write imperative, scoped commit messages (e.g., `Fix jitter accumulation`, `Add deferred path tracer toggle`) and split unrelated refactors.
- Provide screenshot diffs for visual adjustments and exclude generated binaries, caches, and local logs from commits.
